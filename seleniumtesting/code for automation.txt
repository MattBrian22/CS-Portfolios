import time
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# Launch the browser
webdriver = webdriver.Edge()  # Replace with the appropriate browser driver (e.g., Chrome, Firefox)

# Test Steps
try:
    # Step 1: Open the portal
    webdriver.get("https://digitalservices.dglapm.id/")

    # Step 2: Navigate to the Documentation section
    documentation_link = WebDriverWait(webdriver, 10).until(
        EC.presence_of_element_located((By.PARTIAL_LINK_TEXT, "Dokumentasi"))
    )
    documentation_link.click()
    print("Step 2: Successfully clicked on 'Dokumentasi / Documentation' link.")

    # Step 3: Navigate to JWT Signatures
    jwt_signatures_link = WebDriverWait(webdriver, 10).until(
        EC.element_to_be_clickable((By.XPATH, "//*[@id='root']/section/main/div/div[1]/div/ul/li[3]/span"))
    )
    webdriver.execute_script("arguments[0].scrollIntoView();", jwt_signatures_link)
    jwt_signatures_link.click()
    print("Step 3: Successfully clicked on 'JWT Signatures' link.")


  # Step 4: Test Copy function
    copy_button = WebDriverWait(webdriver, 10).until(
        EC.element_to_be_clickable((By.XPATH, "//*[@id='root']/section/main/div/div[2]/div/div[5]/div[3]/div/div/button"))
    )

    # Click the element using JavaScript
    webdriver.execute_script("arguments[0].click();", copy_button)

    # Click the element again using Selenium's click method
    copy_button.click()
    print("Step 4: Successfully clicked on 'Copy' button.")





    # Add validation for the snippet code if needed
    # For example, you can locate the element that contains the snippet code and assert its content.

    # If the script reaches this point without raising an exception, the test case is successful.
    print("Test: Copy Code functions - PASSED")

except Exception as e:
    # If any step fails, the test case is considered failed.
    print("Test: Copy Code functions - FAILED")
    print(f"Error: {str(e)}")

finally:
    # Close the browser after the test completes, regardless of pass/fail
    webdriver.quit()
