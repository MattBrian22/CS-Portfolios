from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# Launch the browser
webdriver = webdriver.Edge()  # Replace with the appropriate browser driver (e.g., Chrome, Firefox)

# Test Steps
try:
    # Step 1: Open the portal
    webdriver.get("https://digitalservices.dglapm.id/")

    # Step 2: Navigate to the Documentation section
    documentation_link = WebDriverWait(webdriver, 10).until(
        EC.presence_of_element_located((By.PARTIAL_LINK_TEXT, "Dokumentasi"))
    )
    documentation_link.click()
    print("Step 2: Successfully clicked on 'Dokumentasi / Documentation' link.")

    # Step 3: Navigate to JWT Signatures
    jwt_signatures_link = WebDriverWait(webdriver, 10).until(
        EC.element_to_be_clickable((By.XPATH, "//*[@id='root']/section/main/div/div[1]/div/ul/li[3]/span"))
    )
    webdriver.execute_script("arguments[0].scrollIntoView();", jwt_signatures_link)
    jwt_signatures_link.click()
    print("Step 3: Successfully clicked on 'JWT Signatures' link.")

    # If the script reaches this point without raising an exception, the navigation is successful.
    print("Test: Navigation to JWT Signatures - PASSED")

except Exception as e:
    # If any step fails, the test case is considered failed.
    print("Test: Navigation to JWT Signatures - FAILED")
    print(f"Error: {str(e)}")

finally:
    # Close the browser after the test completes, regardless of pass/fail
    webdriver.quit()
